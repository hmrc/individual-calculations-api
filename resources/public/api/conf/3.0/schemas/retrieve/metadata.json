{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "calculationId": {
      "description": "Object containing top-level metadata information about the retrieved tax calculation",
      "type": "string"
    },
    "taxYear": {
      "description": "The unique identifier of the calculation.",
      "type": "string",
      "pattern": "^[0-9]{8}|[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
      "example": "f2fb30e5-4ab6-4a29-b3c1-c7264259ff1c"
    },
    "requestedBy": {
      "description": "The requester of the calculation. Currently \"agent\" will default to \"customer\" until it can be supported.",
      "type": "string",
      "enum": [
        "customer",
        "agent",
        "hmrc"
      ]
    },
    "requestedTimestamp": {
      "description": "The timestamp of when the calculation was requested in ISO 8601 UTC format: YYYY-MM-DDThh:mm:ssZ",
      "type": "string",
      "example": "2019-02-15T09:35:15Z"
    },
    "calculationReason": {
      "description": "The reason why the calculation was triggered.",
      "type": "string",
      "oneOf": [
        {
          "enum": [
            "customerRequest"
          ],
          "description": "The calculation was triggered by the customer via software."
        },
        {
          "enum": [
            "class2NICEvent"
          ],
          "description": "The calculation was triggered internally by HMRC once the actual Class 2 NIC amount became available. This event is only applicable for an in-year \"crystallisation\" calculation type."
        },
        {
          "enum": [
            "newLossEvent"
          ],
          "description": "The calculation was triggered by HMRC on receipt of a new pre-MTD brought forward loss made by the customer.\nThis event is only applicable for a \"crystallisation\" calculation type. \nThis event is not currently supported and will be supported in the future."
        },
        {
          "enum": [
            "###TODO_OTHER_VALUES###"
          ],
          "description": "The calculation was triggered by HMRC on receipt of a new pre-MTD brought forward loss made by the customer.\nThis event is only applicable for a \"crystallisation\" calculation type. \nThis event is not currently supported and will be supported in the future."
        }
      ]
    },
    "###TODO###": {
      "description": "Other properties",
      "type": "string"
    }
  },
  "additionalProperties": false,
  "required": [
    "calculationId",
    "taxYear",
    "requestedBy",
    "calculationReason"
  ]
}